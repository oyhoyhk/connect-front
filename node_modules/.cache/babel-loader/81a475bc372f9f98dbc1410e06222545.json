{"ast":null,"code":"import { createAction, handleActions } from 'redux-actions';\nimport { takeLatest } from 'redux-saga/effects';\nimport createRequestSaga, { createRequestActionTypes } from '../lib/createRequestSaga';\nimport * as chatHallAPI from '../lib/api/chatHall';\nconst [GET_GUEST_NUMBER, GET_GUEST_NUMBER_SUCCESS, GET_GUEST_NUMBER_FAILURE] = createRequestActionTypes('chatHall/GET_GUEST_NUMBER');\nconst [GET_USER_INFO, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAILURE] = createRequestActionTypes('chatHall/GET_USER_INFO');\nconst [LEAVE_CHAT_HALL, LEAVE_CHAT_HALL_SUCCESS, LEAVE_CHAT_HALL_FAILURE] = createRequestActionTypes('chatHall/LEAVE_CHAT_HALL');\nconst SET_CHAT_HALL = 'chatHall/SET_CHAT_HALL';\nconst SEND_MESSAGE = 'chatHall/SEND_MESSAGE';\nconst RECEIVE_MESSAGE = 'chatHall/RECEIVE_MESSAGE';\nconst SET_USER_LIST = 'chatHall/SET_USER_LIST';\nconst SOMEONE_LEFT = 'chatHall/SOMEHONE_LEFT';\nconst SOMEONE_IN_OUT = 'chatHall/SOMEONE_IN_OUT';\nconst INITIALIZE_CHAT_HALL = 'chathall/INITIALIZE_CHAT_HALL';\nexport const getGuestNumber = createAction(GET_GUEST_NUMBER);\nexport const setChatHall = createAction(SET_CHAT_HALL);\nexport const sendMessage = createAction(SEND_MESSAGE);\nexport const receiveMessage = createAction(RECEIVE_MESSAGE);\nexport const setUserList = createAction(SET_USER_LIST);\nexport const getUserInfo = createAction(GET_USER_INFO);\nexport const leaveChatHall = createAction(LEAVE_CHAT_HALL);\nexport const someoneLeft = createAction(SOMEONE_LEFT);\nexport const someoneInOut = createAction(SOMEONE_IN_OUT);\nexport const initializeChatHall = createAction(INITIALIZE_CHAT_HALL);\nconst getGuestNumberSaga = createRequestSaga(GET_GUEST_NUMBER, chatHallAPI.guestNumber);\nconst getUserInfoSaga = createRequestSaga(GET_USER_INFO, chatHallAPI.userInfo);\nconst leaveChatHallSaga = createRequestSaga(LEAVE_CHAT_HALL, chatHallAPI.leaveChatHall);\nexport function* chatHallSaga() {\n  yield takeLatest(GET_GUEST_NUMBER, getGuestNumberSaga);\n  yield takeLatest(GET_USER_INFO, getUserInfoSaga);\n  yield takeLatest(LEAVE_CHAT_HALL, leaveChatHallSaga);\n}\nconst initialState = {\n  user: null,\n  userList: [],\n  msgList: [],\n  error: null\n};\nexport default handleActions({\n  [SET_CHAT_HALL]: (state, _ref) => {\n    let {\n      payload: user\n    } = _ref;\n    console.log(user);\n    return { ...state,\n      user: {\n        username: user.username,\n        nickname: user.nickname,\n        profileImage: user.profileImage\n      }\n    };\n  },\n  [GET_GUEST_NUMBER_SUCCESS]: (state, _ref2) => {\n    let {\n      payload: guestInfo\n    } = _ref2;\n    return { ...state,\n      user: {\n        username: guestInfo,\n        nickname: guestInfo,\n        profileImage: null\n      }\n    };\n  },\n  [GET_GUEST_NUMBER_FAILURE]: (state, _ref3) => {\n    let {\n      payload: error\n    } = _ref3;\n    return { ...state,\n      user: null,\n      error: error\n    };\n  },\n  [SEND_MESSAGE]: (state, _ref4) => {\n    let {\n      payload: msg\n    } = _ref4;\n    return { ...state,\n      msgList: [...state.msgList, { ...msg\n      }]\n    };\n  },\n  [RECEIVE_MESSAGE]: (state, _ref5) => {\n    let {\n      payload: msg\n    } = _ref5;\n    return { ...state,\n      msgList: [...state.msgList, { ...msg\n      }]\n    };\n  },\n  [SET_USER_LIST]: (state, _ref6) => {\n    let {\n      payload: userList\n    } = _ref6;\n    return { ...state,\n      userList: [...userList]\n    };\n  },\n  [GET_USER_INFO_SUCCESS]: (state, _ref7) => {\n    let {\n      payload: userList\n    } = _ref7;\n    return { ...state,\n      userList: [...userList]\n    };\n  },\n  [GET_USER_INFO_FAILURE]: (state, _ref8) => {\n    let {\n      payload: error\n    } = _ref8;\n    return { ...state,\n      error: error\n    };\n  },\n  [LEAVE_CHAT_HALL_SUCCESS]: state => ({ ...state,\n    msgList: [],\n    user: null,\n    userList: null\n  }),\n  [LEAVE_CHAT_HALL_FAILURE]: (state, _ref9) => {\n    let {\n      payload: error\n    } = _ref9;\n    return { ...state,\n      error\n    };\n  },\n  [SOMEONE_LEFT]: (state, _ref10) => {\n    let {\n      payload: username\n    } = _ref10;\n    return { ...state,\n      userList: state.userList.filter(user => user.username !== username)\n    };\n  },\n  [SOMEONE_IN_OUT]: (state, _ref11) => {\n    let {\n      payload: {\n        nickname,\n        action\n      }\n    } = _ref11;\n    return { ...state,\n      msgList: [...state.msgList, {\n        action,\n        nickname\n      }]\n    };\n  },\n  [INITIALIZE_CHAT_HALL]: () => ({ ...initialState\n  })\n}, initialState);","map":{"version":3,"sources":["C:/nani/connect/connect-frontend/src/modules/chatHall.js"],"names":["createAction","handleActions","takeLatest","createRequestSaga","createRequestActionTypes","chatHallAPI","GET_GUEST_NUMBER","GET_GUEST_NUMBER_SUCCESS","GET_GUEST_NUMBER_FAILURE","GET_USER_INFO","GET_USER_INFO_SUCCESS","GET_USER_INFO_FAILURE","LEAVE_CHAT_HALL","LEAVE_CHAT_HALL_SUCCESS","LEAVE_CHAT_HALL_FAILURE","SET_CHAT_HALL","SEND_MESSAGE","RECEIVE_MESSAGE","SET_USER_LIST","SOMEONE_LEFT","SOMEONE_IN_OUT","INITIALIZE_CHAT_HALL","getGuestNumber","setChatHall","sendMessage","receiveMessage","setUserList","getUserInfo","leaveChatHall","someoneLeft","someoneInOut","initializeChatHall","getGuestNumberSaga","guestNumber","getUserInfoSaga","userInfo","leaveChatHallSaga","chatHallSaga","initialState","user","userList","msgList","error","state","payload","console","log","username","nickname","profileImage","guestInfo","msg","filter","action"],"mappings":"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","sourcesContent":["import { createAction, handleActions } from 'redux-actions';\r\nimport { takeLatest } from 'redux-saga/effects';\r\nimport createRequestSaga, {\r\n  createRequestActionTypes,\r\n} from '../lib/createRequestSaga';\r\nimport * as chatHallAPI from '../lib/api/chatHall';\r\n\r\nconst [GET_GUEST_NUMBER, GET_GUEST_NUMBER_SUCCESS, GET_GUEST_NUMBER_FAILURE] =\r\n  createRequestActionTypes('chatHall/GET_GUEST_NUMBER');\r\nconst [GET_USER_INFO, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAILURE] =\r\n  createRequestActionTypes('chatHall/GET_USER_INFO');\r\nconst [LEAVE_CHAT_HALL, LEAVE_CHAT_HALL_SUCCESS, LEAVE_CHAT_HALL_FAILURE] =\r\n  createRequestActionTypes('chatHall/LEAVE_CHAT_HALL');\r\n\r\nconst SET_CHAT_HALL = 'chatHall/SET_CHAT_HALL';\r\nconst SEND_MESSAGE = 'chatHall/SEND_MESSAGE';\r\nconst RECEIVE_MESSAGE = 'chatHall/RECEIVE_MESSAGE';\r\nconst SET_USER_LIST = 'chatHall/SET_USER_LIST';\r\nconst SOMEONE_LEFT = 'chatHall/SOMEHONE_LEFT';\r\nconst SOMEONE_IN_OUT = 'chatHall/SOMEONE_IN_OUT';\r\nconst INITIALIZE_CHAT_HALL = 'chathall/INITIALIZE_CHAT_HALL';\r\n\r\nexport const getGuestNumber = createAction(GET_GUEST_NUMBER);\r\nexport const setChatHall = createAction(SET_CHAT_HALL);\r\nexport const sendMessage = createAction(SEND_MESSAGE);\r\nexport const receiveMessage = createAction(RECEIVE_MESSAGE);\r\nexport const setUserList = createAction(SET_USER_LIST);\r\nexport const getUserInfo = createAction(GET_USER_INFO);\r\nexport const leaveChatHall = createAction(LEAVE_CHAT_HALL);\r\nexport const someoneLeft = createAction(SOMEONE_LEFT);\r\nexport const someoneInOut = createAction(SOMEONE_IN_OUT);\r\nexport const initializeChatHall = createAction(INITIALIZE_CHAT_HALL);\r\n\r\nconst getGuestNumberSaga = createRequestSaga(\r\n  GET_GUEST_NUMBER,\r\n  chatHallAPI.guestNumber,\r\n);\r\nconst getUserInfoSaga = createRequestSaga(GET_USER_INFO, chatHallAPI.userInfo);\r\nconst leaveChatHallSaga = createRequestSaga(\r\n  LEAVE_CHAT_HALL,\r\n  chatHallAPI.leaveChatHall,\r\n);\r\n\r\nexport function* chatHallSaga() {\r\n  yield takeLatest(GET_GUEST_NUMBER, getGuestNumberSaga);\r\n  yield takeLatest(GET_USER_INFO, getUserInfoSaga);\r\n  yield takeLatest(LEAVE_CHAT_HALL, leaveChatHallSaga);\r\n}\r\nconst initialState = {\r\n  user: null,\r\n  userList: [],\r\n  msgList: [],\r\n  error: null,\r\n};\r\nexport default handleActions(\r\n  {\r\n    [SET_CHAT_HALL]: (state, { payload: user }) => {\r\n      console.log(user);\r\n      return {\r\n        ...state,\r\n        user: {\r\n          username: user.username,\r\n          nickname: user.nickname,\r\n          profileImage: user.profileImage,\r\n        },\r\n      };\r\n    },\r\n    [GET_GUEST_NUMBER_SUCCESS]: (state, { payload: guestInfo }) => ({\r\n      ...state,\r\n      user: {\r\n        username: guestInfo,\r\n        nickname: guestInfo,\r\n        profileImage: null,\r\n      },\r\n    }),\r\n    [GET_GUEST_NUMBER_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      user: null,\r\n      error: error,\r\n    }),\r\n    [SEND_MESSAGE]: (state, { payload: msg }) => ({\r\n      ...state,\r\n      msgList: [...state.msgList, { ...msg }],\r\n    }),\r\n    [RECEIVE_MESSAGE]: (state, { payload: msg }) => ({\r\n      ...state,\r\n      msgList: [...state.msgList, { ...msg }],\r\n    }),\r\n    [SET_USER_LIST]: (state, { payload: userList }) => ({\r\n      ...state,\r\n      userList: [...userList],\r\n    }),\r\n    [GET_USER_INFO_SUCCESS]: (state, { payload: userList }) => ({\r\n      ...state,\r\n      userList: [...userList],\r\n    }),\r\n    [GET_USER_INFO_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      error: error,\r\n    }),\r\n    [LEAVE_CHAT_HALL_SUCCESS]: (state) => ({\r\n      ...state,\r\n      msgList: [],\r\n      user: null,\r\n      userList: null,\r\n    }),\r\n    [LEAVE_CHAT_HALL_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      error,\r\n    }),\r\n    [SOMEONE_LEFT]: (state, { payload: username }) => ({\r\n      ...state,\r\n      userList: state.userList.filter((user) => user.username !== username),\r\n    }),\r\n    [SOMEONE_IN_OUT]: (state, { payload: { nickname, action } }) => ({\r\n      ...state,\r\n      msgList: [...state.msgList, { action, nickname }],\r\n    }),\r\n    [INITIALIZE_CHAT_HALL]: () => ({\r\n      ...initialState,\r\n    }),\r\n  },\r\n  initialState,\r\n);\r\n"]},"metadata":{},"sourceType":"module"}
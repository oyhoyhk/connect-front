{"ast":null,"code":"import _defineProperty from\"C:/nani/connect/connect-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/nani/connect/connect-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/nani/connect/connect-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _handleActions;import _regeneratorRuntime from\"C:\\\\nani\\\\connect\\\\connect-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(authSaga);import{createAction,handleActions}from'redux-actions';import*as authAPI from'../lib/api/auth';import{takeLatest}from'redux-saga/effects';import createRequestSaga,{createRequestActionTypes}from'../lib/createRequestSaga';var CHANGE_FIELD='auth/CHANGE_FIELD';var INITIALIZE_FORM='auth/INITIALIZE_FORM';var INITIALIZE_TEMP_INFO='auth/INITIALIZE_TEMP_INFO';var SET_TEMP_INFO='auth/SET_TEMP_INFO';var REMOVE_AUTH='auth/REMOVE_AUTH';var _createRequestActionT=createRequestActionTypes('auth/REGISTER'),_createRequestActionT2=_slicedToArray(_createRequestActionT,3),REGISTER=_createRequestActionT2[0],REGISTER_SUCCESS=_createRequestActionT2[1],REGISTER_FAILURE=_createRequestActionT2[2];var _createRequestActionT3=createRequestActionTypes('auth/LOGIN'),_createRequestActionT4=_slicedToArray(_createRequestActionT3,3),LOGIN=_createRequestActionT4[0],LOGIN_SUCCESS=_createRequestActionT4[1],LOGIN_FAILURE=_createRequestActionT4[2];var _createRequestActionT5=createRequestActionTypes('auth/DUPLICATE_CHECK'),_createRequestActionT6=_slicedToArray(_createRequestActionT5,3),DUPLICATE_CHECK=_createRequestActionT6[0],DUPLICATE_CHECK_SUCCESS=_createRequestActionT6[1],DUPLICATE_CHECK_FAILURE=_createRequestActionT6[2];export var changeField=createAction(CHANGE_FIELD,function(_ref){var form=_ref.form,key=_ref.key,value=_ref.value;return{form:form,key:key,value:value};});export var initializeForm=createAction(INITIALIZE_FORM,function(form){return form;});export var initializeTempInfo=createAction(INITIALIZE_TEMP_INFO,function(_ref2){var username=_ref2.username,password=_ref2.password;return{username:username,password:password};});export var setTempInfo=createAction(SET_TEMP_INFO,function(type,value){return{type:type,value:value};});export var register=createAction(REGISTER,function(formData){return{formData:formData};});export var login=createAction(LOGIN,function(_ref3){var username=_ref3.username,password=_ref3.password;return{username:username,password:password};});export var duplicateCheck=createAction(DUPLICATE_CHECK,function(_ref4){var username=_ref4.username;return{username:username};});export var removeAuth=createAction(REMOVE_AUTH);var registerSaga=createRequestSaga(REGISTER,authAPI.register);var loginSaga=createRequestSaga(LOGIN,authAPI.login);var duplicateCheckSaga=createRequestSaga(DUPLICATE_CHECK,authAPI.duplicateCheck);export function authSaga(){return _regeneratorRuntime.wrap(function authSaga$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(REGISTER,registerSaga);case 2:_context.next=4;return takeLatest(LOGIN,loginSaga);case 4:_context.next=6;return takeLatest(DUPLICATE_CHECK,duplicateCheckSaga);case 6:case\"end\":return _context.stop();}}},_marked);}var initialState={register:{username:'',password:'',passwordConfirm:''},login:{username:'',password:''},tempInfo:{username:'',password:'',nickname:null,profileImage:null},auth:null,authError:null,isDuplicate:null};var auth=handleActions((_handleActions={},_defineProperty(_handleActions,CHANGE_FIELD,function(state,_ref5){var _ref5$payload=_ref5.payload,form=_ref5$payload.form,key=_ref5$payload.key,value=_ref5$payload.value;var target=state[form];return _objectSpread(_objectSpread({},state),{},_defineProperty({},form,_objectSpread(_objectSpread({},target),{},_defineProperty({},key,value))));}),_defineProperty(_handleActions,INITIALIZE_FORM,function(state,_ref6){var form=_ref6.form;return _objectSpread(_objectSpread({},state),{},_defineProperty({},form,initialState[form]));}),_defineProperty(_handleActions,INITIALIZE_TEMP_INFO,function(state,_ref7){var _ref7$payload=_ref7.payload,username=_ref7$payload.username,password=_ref7$payload.password;return _objectSpread(_objectSpread({},state),{},{tempInfo:{username:username,password:password,nickname:null,profileImage:null}});}),_defineProperty(_handleActions,SET_TEMP_INFO,function(state,_ref8){var _ref8$payload=_ref8.payload,type=_ref8$payload.type,value=_ref8$payload.value;return _objectSpread(_objectSpread({},state),{},{tempInfo:_objectSpread(_objectSpread({},state.tempInfo),{},_defineProperty({},type.type,type.value))});}),_defineProperty(_handleActions,REGISTER_SUCCESS,function(state,action){console.log(action);return _objectSpread(_objectSpread({},state),{},{authError:null,auth:_objectSpread({},action.payload)});}),_defineProperty(_handleActions,REGISTER_FAILURE,function(state,_ref9){var error=_ref9.payload;return _objectSpread(_objectSpread({},state),{},{authError:error});}),_defineProperty(_handleActions,LOGIN_SUCCESS,function(state,_ref10){var auth=_ref10.payload;return _objectSpread(_objectSpread({},state),{},{authError:null,auth:auth});}),_defineProperty(_handleActions,LOGIN_FAILURE,function(state,_ref11){var error=_ref11.payload;return _objectSpread(_objectSpread({},state),{},{authError:error});}),_defineProperty(_handleActions,DUPLICATE_CHECK_SUCCESS,function(state,_ref12){var result=_ref12.payload;console.log(result);return _objectSpread(_objectSpread({},state),{},{isDuplicate:result===1?true:false});}),_defineProperty(_handleActions,DUPLICATE_CHECK_FAILURE,function(state,_ref13){var error=_ref13.payload;return _objectSpread(_objectSpread({},state),{},{authError:error});}),_defineProperty(_handleActions,REMOVE_AUTH,function(state){return _objectSpread(_objectSpread({},state),{},{auth:null});}),_handleActions),initialState);export default auth;","map":{"version":3,"sources":["C:/nani/connect/connect-frontend/src/modules/auth.js"],"names":["authSaga","createAction","handleActions","authAPI","takeLatest","createRequestSaga","createRequestActionTypes","CHANGE_FIELD","INITIALIZE_FORM","INITIALIZE_TEMP_INFO","SET_TEMP_INFO","REMOVE_AUTH","REGISTER","REGISTER_SUCCESS","REGISTER_FAILURE","LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","DUPLICATE_CHECK","DUPLICATE_CHECK_SUCCESS","DUPLICATE_CHECK_FAILURE","changeField","form","key","value","initializeForm","initializeTempInfo","username","password","setTempInfo","type","register","formData","login","duplicateCheck","removeAuth","registerSaga","loginSaga","duplicateCheckSaga","initialState","passwordConfirm","tempInfo","nickname","profileImage","auth","authError","isDuplicate","state","payload","target","action","console","log","error","result"],"mappings":"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","sourcesContent":["import { createAction, handleActions } from 'redux-actions';\r\nimport * as authAPI from '../lib/api/auth';\r\nimport { takeLatest } from 'redux-saga/effects';\r\nimport createRequestSaga, {\r\n  createRequestActionTypes,\r\n} from '../lib/createRequestSaga';\r\n\r\nconst CHANGE_FIELD = 'auth/CHANGE_FIELD';\r\nconst INITIALIZE_FORM = 'auth/INITIALIZE_FORM';\r\nconst INITIALIZE_TEMP_INFO = 'auth/INITIALIZE_TEMP_INFO';\r\nconst SET_TEMP_INFO = 'auth/SET_TEMP_INFO';\r\nconst REMOVE_AUTH = 'auth/REMOVE_AUTH';\r\nconst [REGISTER, REGISTER_SUCCESS, REGISTER_FAILURE] =\r\n  createRequestActionTypes('auth/REGISTER');\r\nconst [LOGIN, LOGIN_SUCCESS, LOGIN_FAILURE] =\r\n  createRequestActionTypes('auth/LOGIN');\r\nconst [DUPLICATE_CHECK, DUPLICATE_CHECK_SUCCESS, DUPLICATE_CHECK_FAILURE] =\r\n  createRequestActionTypes('auth/DUPLICATE_CHECK');\r\n\r\nexport const changeField = createAction(\r\n  CHANGE_FIELD,\r\n  ({ form, key, value }) => ({\r\n    form,\r\n    key,\r\n    value,\r\n  }),\r\n);\r\nexport const initializeForm = createAction(INITIALIZE_FORM, (form) => form);\r\nexport const initializeTempInfo = createAction(\r\n  INITIALIZE_TEMP_INFO,\r\n  ({ username, password }) => ({ username, password }),\r\n);\r\nexport const setTempInfo = createAction(SET_TEMP_INFO, (type, value) => ({\r\n  type,\r\n  value,\r\n}));\r\nexport const register = createAction(REGISTER, (formData) => {\r\n  return {\r\n    formData,\r\n  };\r\n});\r\nexport const login = createAction(LOGIN, ({ username, password }) => ({\r\n  username,\r\n  password,\r\n}));\r\n\r\nexport const duplicateCheck = createAction(DUPLICATE_CHECK, ({ username }) => ({\r\n  username,\r\n}));\r\nexport const removeAuth = createAction(REMOVE_AUTH);\r\n\r\nconst registerSaga = createRequestSaga(REGISTER, authAPI.register);\r\nconst loginSaga = createRequestSaga(LOGIN, authAPI.login);\r\nconst duplicateCheckSaga = createRequestSaga(\r\n  DUPLICATE_CHECK,\r\n  authAPI.duplicateCheck,\r\n);\r\nexport function* authSaga() {\r\n  yield takeLatest(REGISTER, registerSaga);\r\n  yield takeLatest(LOGIN, loginSaga);\r\n  yield takeLatest(DUPLICATE_CHECK, duplicateCheckSaga);\r\n}\r\n\r\nconst initialState = {\r\n  register: {\r\n    username: '',\r\n    password: '',\r\n    passwordConfirm: '',\r\n  },\r\n  login: {\r\n    username: '',\r\n    password: '',\r\n  },\r\n  tempInfo: {\r\n    username: '',\r\n    password: '',\r\n    nickname: null,\r\n    profileImage: null,\r\n  },\r\n  auth: null,\r\n  authError: null,\r\n  isDuplicate: null,\r\n};\r\n\r\nconst auth = handleActions(\r\n  {\r\n    [CHANGE_FIELD]: (state, { payload: { form, key, value } }) => {\r\n      const target = state[form];\r\n      return {\r\n        ...state,\r\n        [form]: {\r\n          ...target,\r\n          [key]: value,\r\n        },\r\n      };\r\n    },\r\n    [INITIALIZE_FORM]: (state, { form }) => ({\r\n      ...state,\r\n      [form]: initialState[form],\r\n    }),\r\n    [INITIALIZE_TEMP_INFO]: (state, { payload: { username, password } }) => {\r\n      return {\r\n        ...state,\r\n        tempInfo: {\r\n          username,\r\n          password,\r\n          nickname: null,\r\n          profileImage: null,\r\n        },\r\n      };\r\n    },\r\n    [SET_TEMP_INFO]: (state, { payload: { type, value } }) => ({\r\n      ...state,\r\n      tempInfo: {\r\n        ...state.tempInfo,\r\n        [type.type]: type.value,\r\n      },\r\n    }),\r\n    [REGISTER_SUCCESS]: (state, action) => {\r\n      console.log(action);\r\n      return {\r\n        ...state,\r\n        authError: null,\r\n        auth: { ...action.payload },\r\n      };\r\n    },\r\n    [REGISTER_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      authError: error,\r\n    }),\r\n    [LOGIN_SUCCESS]: (state, { payload: auth }) => ({\r\n      ...state,\r\n      authError: null,\r\n      auth,\r\n    }),\r\n    [LOGIN_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      authError: error,\r\n    }),\r\n    [DUPLICATE_CHECK_SUCCESS]: (state, { payload: result }) => {\r\n      console.log(result);\r\n      return {\r\n        ...state,\r\n        isDuplicate: result === 1 ? true : false,\r\n      };\r\n    },\r\n    [DUPLICATE_CHECK_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      authError: error,\r\n    }),\r\n    [REMOVE_AUTH]: (state) => ({\r\n      ...state,\r\n      auth: null,\r\n    }),\r\n  },\r\n  initialState,\r\n);\r\n\r\nexport default auth;\r\n"]},"metadata":{},"sourceType":"module"}
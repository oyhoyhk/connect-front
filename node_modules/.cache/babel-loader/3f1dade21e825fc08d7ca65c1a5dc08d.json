{"ast":null,"code":"import _defineProperty from\"C:/nani/connect/connect-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"C:/nani/connect/connect-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/nani/connect/connect-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/nani/connect/connect-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _handleActions;import _regeneratorRuntime from\"C:\\\\nani\\\\connect\\\\connect-frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(chatHallSaga);import{createAction,handleActions}from'redux-actions';import{takeLatest}from'redux-saga/effects';import createRequestSaga,{createRequestActionTypes}from'../lib/createRequestSaga';import*as chatHallAPI from'../lib/api/chatHall';var _createRequestActionT=createRequestActionTypes('chatHall/GET_GUEST_NUMBER'),_createRequestActionT2=_slicedToArray(_createRequestActionT,3),GET_GUEST_NUMBER=_createRequestActionT2[0],GET_GUEST_NUMBER_SUCCESS=_createRequestActionT2[1],GET_GUEST_NUMBER_FAILURE=_createRequestActionT2[2];var _createRequestActionT3=createRequestActionTypes('chatHall/GET_USER_INFO'),_createRequestActionT4=_slicedToArray(_createRequestActionT3,3),GET_USER_INFO=_createRequestActionT4[0],GET_USER_INFO_SUCCESS=_createRequestActionT4[1],GET_USER_INFO_FAILURE=_createRequestActionT4[2];var LEAVE_CHAT_HALL='chatHall/LEAVE_CHAT_HALL';var SET_CHAT_HALL='chatHall/SET_CHAT_HALL';var SEND_MESSAGE='chatHall/SEND_MESSAGE';var RECEIVE_MESSAGE='chatHall/RECEIVE_MESSAGE';var SET_USER_LIST='chatHall/SET_USER_LIST';var SOMEONE_LEFT='chatHall/SOMEHONE_LEFT';var SOMEONE_IN_OUT='chatHall/SOMEONE_IN_OUT';var INITIALIZE_CHAT_HALL='chathall/INITIALIZE_CHAT_HALL';export var getGuestNumber=createAction(GET_GUEST_NUMBER);export var setChatHall=createAction(SET_CHAT_HALL);export var sendMessage=createAction(SEND_MESSAGE);export var receiveMessage=createAction(RECEIVE_MESSAGE);export var setUserList=createAction(SET_USER_LIST);export var getUserInfo=createAction(GET_USER_INFO);export var leaveChatHall=createAction(LEAVE_CHAT_HALL);export var someoneLeft=createAction(SOMEONE_LEFT);export var someoneInOut=createAction(SOMEONE_IN_OUT);export var initializeChatHall=createAction(INITIALIZE_CHAT_HALL);var getGuestNumberSaga=createRequestSaga(GET_GUEST_NUMBER,chatHallAPI.guestNumber);var getUserInfoSaga=createRequestSaga(GET_USER_INFO,chatHallAPI.userInfo);export function chatHallSaga(){return _regeneratorRuntime.wrap(function chatHallSaga$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(GET_GUEST_NUMBER,getGuestNumberSaga);case 2:_context.next=4;return takeLatest(GET_USER_INFO,getUserInfoSaga);case 4:case\"end\":return _context.stop();}}},_marked);}var initialState={user:null,userList:[],msgList:[],error:null};export default handleActions((_handleActions={},_defineProperty(_handleActions,SET_CHAT_HALL,function(state,_ref){var user=_ref.payload;return _objectSpread(_objectSpread({},state),{},{user:{username:user.username,nickname:user.nickname,profileImage:user.profileImage}});}),_defineProperty(_handleActions,GET_GUEST_NUMBER_SUCCESS,function(state,_ref2){var guestInfo=_ref2.payload;return _objectSpread(_objectSpread({},state),{},{user:{username:guestInfo,nickname:guestInfo,profileImage:null}});}),_defineProperty(_handleActions,GET_GUEST_NUMBER_FAILURE,function(state,_ref3){var error=_ref3.payload;return _objectSpread(_objectSpread({},state),{},{user:null,error:error});}),_defineProperty(_handleActions,SEND_MESSAGE,function(state,_ref4){var msg=_ref4.payload;return _objectSpread(_objectSpread({},state),{},{msgList:[].concat(_toConsumableArray(state.msgList),[_objectSpread({},msg)])});}),_defineProperty(_handleActions,RECEIVE_MESSAGE,function(state,_ref5){var msg=_ref5.payload;return _objectSpread(_objectSpread({},state),{},{msgList:[].concat(_toConsumableArray(state.msgList),[_objectSpread({},msg)])});}),_defineProperty(_handleActions,SET_USER_LIST,function(state,_ref6){var userList=_ref6.payload;return _objectSpread(_objectSpread({},state),{},{userList:_toConsumableArray(userList)});}),_defineProperty(_handleActions,GET_USER_INFO_SUCCESS,function(state,_ref7){var userList=_ref7.payload;return _objectSpread(_objectSpread({},state),{},{userList:_toConsumableArray(userList)});}),_defineProperty(_handleActions,GET_USER_INFO_FAILURE,function(state,_ref8){var error=_ref8.payload;return _objectSpread(_objectSpread({},state),{},{error:error});}),_defineProperty(_handleActions,LEAVE_CHAT_HALL,function(state){return _objectSpread(_objectSpread({},state),{},{msgList:[]});}),_defineProperty(_handleActions,SOMEONE_LEFT,function(state,_ref9){var username=_ref9.payload;return _objectSpread(_objectSpread({},state),{},{userList:state.userList.filter(function(user){return user.username!==username;})});}),_defineProperty(_handleActions,SOMEONE_IN_OUT,function(state,_ref10){var _ref10$payload=_ref10.payload,nickname=_ref10$payload.nickname,action=_ref10$payload.action;return _objectSpread(_objectSpread({},state),{},{msgList:[].concat(_toConsumableArray(state.msgList),[{action:action,nickname:nickname}])});}),_defineProperty(_handleActions,INITIALIZE_CHAT_HALL,function(){return _objectSpread({},initialState);}),_handleActions),initialState);","map":{"version":3,"sources":["C:/nani/connect/connect-frontend/src/modules/chatHall.js"],"names":["chatHallSaga","createAction","handleActions","takeLatest","createRequestSaga","createRequestActionTypes","chatHallAPI","GET_GUEST_NUMBER","GET_GUEST_NUMBER_SUCCESS","GET_GUEST_NUMBER_FAILURE","GET_USER_INFO","GET_USER_INFO_SUCCESS","GET_USER_INFO_FAILURE","LEAVE_CHAT_HALL","SET_CHAT_HALL","SEND_MESSAGE","RECEIVE_MESSAGE","SET_USER_LIST","SOMEONE_LEFT","SOMEONE_IN_OUT","INITIALIZE_CHAT_HALL","getGuestNumber","setChatHall","sendMessage","receiveMessage","setUserList","getUserInfo","leaveChatHall","someoneLeft","someoneInOut","initializeChatHall","getGuestNumberSaga","guestNumber","getUserInfoSaga","userInfo","initialState","user","userList","msgList","error","state","payload","username","nickname","profileImage","guestInfo","msg","filter","action"],"mappings":"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","sourcesContent":["import { createAction, handleActions } from 'redux-actions';\r\nimport { takeLatest } from 'redux-saga/effects';\r\nimport createRequestSaga, {\r\n  createRequestActionTypes,\r\n} from '../lib/createRequestSaga';\r\nimport * as chatHallAPI from '../lib/api/chatHall';\r\n\r\nconst [GET_GUEST_NUMBER, GET_GUEST_NUMBER_SUCCESS, GET_GUEST_NUMBER_FAILURE] =\r\n  createRequestActionTypes('chatHall/GET_GUEST_NUMBER');\r\nconst [GET_USER_INFO, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAILURE] =\r\n  createRequestActionTypes('chatHall/GET_USER_INFO');\r\nconst LEAVE_CHAT_HALL = 'chatHall/LEAVE_CHAT_HALL';\r\n\r\nconst SET_CHAT_HALL = 'chatHall/SET_CHAT_HALL';\r\nconst SEND_MESSAGE = 'chatHall/SEND_MESSAGE';\r\nconst RECEIVE_MESSAGE = 'chatHall/RECEIVE_MESSAGE';\r\nconst SET_USER_LIST = 'chatHall/SET_USER_LIST';\r\nconst SOMEONE_LEFT = 'chatHall/SOMEHONE_LEFT';\r\nconst SOMEONE_IN_OUT = 'chatHall/SOMEONE_IN_OUT';\r\nconst INITIALIZE_CHAT_HALL = 'chathall/INITIALIZE_CHAT_HALL';\r\n\r\nexport const getGuestNumber = createAction(GET_GUEST_NUMBER);\r\nexport const setChatHall = createAction(SET_CHAT_HALL);\r\nexport const sendMessage = createAction(SEND_MESSAGE);\r\nexport const receiveMessage = createAction(RECEIVE_MESSAGE);\r\nexport const setUserList = createAction(SET_USER_LIST);\r\nexport const getUserInfo = createAction(GET_USER_INFO);\r\nexport const leaveChatHall = createAction(LEAVE_CHAT_HALL);\r\nexport const someoneLeft = createAction(SOMEONE_LEFT);\r\nexport const someoneInOut = createAction(SOMEONE_IN_OUT);\r\nexport const initializeChatHall = createAction(INITIALIZE_CHAT_HALL);\r\n\r\nconst getGuestNumberSaga = createRequestSaga(\r\n  GET_GUEST_NUMBER,\r\n  chatHallAPI.guestNumber,\r\n);\r\nconst getUserInfoSaga = createRequestSaga(GET_USER_INFO, chatHallAPI.userInfo);\r\n\r\nexport function* chatHallSaga() {\r\n  yield takeLatest(GET_GUEST_NUMBER, getGuestNumberSaga);\r\n  yield takeLatest(GET_USER_INFO, getUserInfoSaga);\r\n}\r\nconst initialState = {\r\n  user: null,\r\n  userList: [],\r\n  msgList: [],\r\n  error: null,\r\n};\r\nexport default handleActions(\r\n  {\r\n    [SET_CHAT_HALL]: (state, { payload: user }) => ({\r\n      ...state,\r\n      user: {\r\n        username: user.username,\r\n        nickname: user.nickname,\r\n        profileImage: user.profileImage,\r\n      },\r\n    }),\r\n    [GET_GUEST_NUMBER_SUCCESS]: (state, { payload: guestInfo }) => ({\r\n      ...state,\r\n      user: {\r\n        username: guestInfo,\r\n        nickname: guestInfo,\r\n        profileImage: null,\r\n      },\r\n    }),\r\n    [GET_GUEST_NUMBER_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      user: null,\r\n      error: error,\r\n    }),\r\n    [SEND_MESSAGE]: (state, { payload: msg }) => ({\r\n      ...state,\r\n      msgList: [...state.msgList, { ...msg }],\r\n    }),\r\n    [RECEIVE_MESSAGE]: (state, { payload: msg }) => ({\r\n      ...state,\r\n      msgList: [...state.msgList, { ...msg }],\r\n    }),\r\n    [SET_USER_LIST]: (state, { payload: userList }) => ({\r\n      ...state,\r\n      userList: [...userList],\r\n    }),\r\n    [GET_USER_INFO_SUCCESS]: (state, { payload: userList }) => ({\r\n      ...state,\r\n      userList: [...userList],\r\n    }),\r\n    [GET_USER_INFO_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      error: error,\r\n    }),\r\n    [LEAVE_CHAT_HALL]: (state) => ({\r\n      ...state,\r\n      msgList: [],\r\n    }),\r\n    [SOMEONE_LEFT]: (state, { payload: username }) => ({\r\n      ...state,\r\n      userList: state.userList.filter((user) => user.username !== username),\r\n    }),\r\n    [SOMEONE_IN_OUT]: (state, { payload: { nickname, action } }) => ({\r\n      ...state,\r\n      msgList: [...state.msgList, { action, nickname }],\r\n    }),\r\n    [INITIALIZE_CHAT_HALL]: () => ({\r\n      ...initialState,\r\n    }),\r\n  },\r\n  initialState,\r\n);\r\n"]},"metadata":{},"sourceType":"module"}